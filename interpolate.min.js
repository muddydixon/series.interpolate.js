var expect;(function(e){var t,n,r,u,i,o;if("undefined"!=typeof require&&(n=require("d3")),null==n)throw"d3 required";return o=function(e,u){var o,l,a,p,f,s,c,x,d,h,w;for(u=u||{},f=u.index||"x",h=+(u.step||r(e,f)),a=u.defaults,l=i(e[0],f),o=null!=e[0][f]?e[0][f].constructor:e[0].constructor,p=0,d=i(e[p],f);++p<e.length;)l=i(e[p],f),l-d!==h&&(s=(l-d)/h,x=n.interpolate(e[p-1],e[p]),c=function(){w=[];for(var e=1,t=s-1;t>=1?t>=e:e>=t;t>=1?e++:e--)w.push(e);return w}.apply(this).map(function(e){var n,r;return n=x(e/s),null!=n[f]?(r=new o(n[f]),null!=a&&(n=t(a)),n[f]=r):null!=a&&(n=t(a)),t(n)}),Array.prototype.splice.apply(e,[p,0].concat(c)),p+=c.length),d=l;return[e,h]},t=function(e){return JSON.parse(JSON.stringify(e))},r=function(e,t){var n,r,o,l,a,p,f,s;for(a={},n=i(e[0],t),r=f=1,s=e.length-1;s>=1?s>=f:f>=s;r=s>=1?++f:--f)o=n,n=i(e[r],t),a[n-o]||(a[n-o]=0),a[n-o]++;return p=function(){var e;e=[];for(l in a)e.push(l);return e}(),1===p.length?p[0]:u(p)},i=function(e,t){if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Date)return e.getTime();if("string"==typeof e)return e;if(null!=t&&null!=e[t])return e[t];throw"cannot estimate stepwise, `index` or `step` should be given"},u=function(e){var t,n,r,u,i;for(r=function(e,t){for(var n;0!==t;)n=e%t,e=t,t=n;return e},t=e[0],n=u=1,i=e.length-1;i>=1?i>=u:u>=i;n=i>=1?++u:--u)if(t=r(t,e[n]),1===t)return 1;return t},"undefined"!=typeof module?module.exports=o:e.interpolate||(e.interpolate=o)})(this.self||global),null==module.parent&&(expect=require("chai").expect,expect(estimeteStepwise([1,4,6,8])).to.equal(1),expect(estimeteStepwise([{x:1},{x:4},{x:6},{x:8}],"x")).to.equal(1),expect(estimeteStepwise([{x:new Date(2013,0,1)},{x:new Date(2013,0,4)},{x:new Date(2013,0,6)},{x:new Date(2013,0,8)}],"x")).to.equal(864e5),expect(estimeteStepwise([4,7,10,16,22,28])).to.equal(3));