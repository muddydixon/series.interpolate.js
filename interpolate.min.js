(function(e){var t,n,r,o,u,a;if(n="undefined"!=typeof require?require("d3"):e.d3,null==n)throw"d3 required";return a=function(e,o){var a,l,i,f,p,c,d,s,x,q,g;for(o=o||{},p=o.index||"x",q=+(o.step||r(e,p)),i=o.defaults,l=u(e[0],p),a=null!=e[0][p]?e[0][p].constructor:e[0].constructor,f=0,x=u(e[f],p);++f<e.length;)l=u(e[f],p),l-x!==q&&(c=(l-x)/q,s=n.interpolate(e[f-1],e[f]),d=function(){g=[];for(var e=1,t=c-1;t>=1?t>=e:e>=t;t>=1?e++:e--)g.push(e);return g}.apply(this).map(function(e){var n,r;return n=s(e/c),null!=n[p]?(r=new a(n[p]),null!=i&&(n=t(i)),n[p]=r,n=t(n)):n=null!=i?t(i):new a(n),n}),Array.prototype.splice.apply(e,[f,0].concat(d)),f+=d.length),x=l;return[e,q]},t=function(e){var n,r,o,u;if("string"==typeof e||"boolean"==typeof e||"number"==typeof e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return o=[e.multiline?"m":"",e.global?"g":"",e.ignoreCase?"i":""].join(""),RegExp(e.source,o);if(e instanceof Array)return e.map(function(e){return t(e)});r={};for(n in e)u=e[n],r[n]=t(u);return r},r=function(e,t){var n,r,a,l,i,f,p,c;for(i={},n=u(e[0],t),r=p=1,c=e.length-1;c>=1?c>=p:p>=c;r=c>=1?++p:--p)a=n,n=u(e[r],t),isNaN(n-a)||(i[n-a]||(i[n-a]=0),i[n-a]++);return f=function(){var e;e=[];for(l in i)e.push(+l);return e}(),1===f.length?f[0]:o(f)},u=function(e,t){if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Date)return e.getTime();if("string"==typeof e)return e;if(null!=t&&null!=e[t])return e[t];throw"cannot estimate stepwise, `index` or `step` should be given"},o=function(e){var t,n,r,o,u;for(r=function(e,t){for(var n;0!==t;)n=e%t,e=t,t=n;return e},t=e[0],n=o=1,u=e.length-1;u>=1?u>=o:o>=u;n=u>=1?++o:--o)if(t=r(t,e[n]),1===t)return 1;return t},"undefined"!=typeof module?module.exports=a:e.interpolate||(e.interpolate=a),"undefined"!=typeof module&&null!==module&&null==module.parent?function(){var e;return e=require("chai").expect,e(r([1,4,6,8])).to.equal(1),e(r([{x:1},{x:4},{x:6},{x:8}],"x")).to.equal(1),e(r([{x:new Date(2013,0,1)},{x:new Date(2013,0,4)},{x:new Date(2013,0,6)},{x:new Date(2013,0,8)}],"x")).to.equal(864e5),e(r([4,7,10,16,22,28])).to.equal(3),e(t(1)).to.equal(1),e(t(!0)).to.equal(!0),e(t("hoge")).to.equal("hoge"),e(t(new Date(2013,1,1))).to.deep.equal(new Date(2013,1,1)),e(t(/a/)).to.deep.equal(/a/),e(t([1,2,3])).to.deep.equal([1,2,3]),e(t({x:1})).to.deep.equal({x:1}),e(t([1,[2,3,[4,5],6],7])).to.deep.equal([1,[2,3,[4,5],6],7]),e(t({x:{y:{z:1,p:2},q:{3:3}},r:4})).to.deep.equal({x:{y:{z:1,p:2},q:{3:3}},r:4}),e(t([{time:new Date(2013,1,1),val:1},{time:new Date(2013,1,3),val:3}])).to.deep.equal([{time:new Date(2013,1,1),val:1},{time:new Date(2013,1,3),val:3}])}():void 0})(this.self||global);