(function(e){var n,t,r,u,o,l;if(t="undefined"!=typeof require?require("d3"):e.d3,null==t)throw"d3 required";return l=function(e,u){var l,a,i,f,p,c,d,s,x,q,g;if(null==e||0===e.length)return[[],null];if(u=u||{},p=u.index||"x",q=+(u.step||r(e,p)),i=u.defaults,a=o(e[0],p),null==a)return[[],null];for(l=null!=e[0][p]?e[0][p].constructor:e[0].constructor,f=0,x=o(e[f],p);++f<e.length&&(a=o(e[f],p),null!=a);)a-x!==q&&(c=(a-x)/q,s=t.interpolate(e[f-1],e[f]),d=function(){g=[];for(var e=1,n=c-1;n>=1?n>=e:e>=n;n>=1?e++:e--)g.push(e);return g}.apply(this).map(function(e){var t,r;return t=s(e/c),null!=t[p]?(r=new l(t[p]),null!=i&&(t=n(i)),t[p]=r,t=n(t)):t=null!=i?n(i):new l(t),t}),Array.prototype.splice.apply(e,[f,0].concat(d)),f+=d.length),x=a;return[e,q]},n=function(e){var t,r,u,o;if("string"==typeof e||"boolean"==typeof e||"number"==typeof e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return u=[e.multiline?"m":"",e.global?"g":"",e.ignoreCase?"i":""].join(""),RegExp(e.source,u);if(e instanceof Array)return e.map(function(e){return n(e)});r={};for(t in e)o=e[t],r[t]=n(o);return r},r=function(e,n){var t,r,l,a,i,f,p,c;for(i={},t=o(e[0],n),r=p=1,c=e.length-1;c>=1?c>=p:p>=c;r=c>=1?++p:--p)l=t,t=o(e[r],n),isNaN(t-l)||(i[t-l]||(i[t-l]=0),i[t-l]++);return f=function(){var e;e=[];for(a in i)e.push(+a);return e}(),1===f.length?f[0]:u(f)},o=function(e,n){if(null==e)return null;if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Date)return e.getTime();if("string"==typeof e)return e;if(null!=n&&null!=e[n])return e[n];throw"cannot estimate stepwise, `index` or `step` should be given"},u=function(e){var n,t,r,u,o;for(r=function(e,n){for(var t;0!==n;)t=e%n,e=n,n=t;return e},n=e[0],t=u=1,o=e.length-1;o>=1?o>=u:u>=o;t=o>=1?++u:--u)if(n=r(n,e[t]),1===n)return 1;return n},"undefined"!=typeof module?module.exports=l:e.interpolate||(e.interpolate=l),"undefined"!=typeof module&&null!==module&&null==module.parent?function(){var e;return e=require("chai").expect,e(r([1,4,6,8])).to.equal(1),e(r([{x:1},{x:4},{x:6},{x:8}],"x")).to.equal(1),e(r([{x:new Date(2013,0,1)},{x:new Date(2013,0,4)},{x:new Date(2013,0,6)},{x:new Date(2013,0,8)}],"x")).to.equal(864e5),e(r([4,7,10,16,22,28])).to.equal(3),e(n(1)).to.equal(1),e(n(!0)).to.equal(!0),e(n("hoge")).to.equal("hoge"),e(n(new Date(2013,1,1))).to.deep.equal(new Date(2013,1,1)),e(n(/a/)).to.deep.equal(/a/),e(n([1,2,3])).to.deep.equal([1,2,3]),e(n({x:1})).to.deep.equal({x:1}),e(n([1,[2,3,[4,5],6],7])).to.deep.equal([1,[2,3,[4,5],6],7]),e(n({x:{y:{z:1,p:2},q:{3:3}},r:4})).to.deep.equal({x:{y:{z:1,p:2},q:{3:3}},r:4}),e(n([{time:new Date(2013,1,1),val:1},{time:new Date(2013,1,3),val:3}])).to.deep.equal([{time:new Date(2013,1,1),val:1},{time:new Date(2013,1,3),val:3}])}():void 0})(this.self||global);